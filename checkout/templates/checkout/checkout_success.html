{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% load crispy_forms_tags %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">
{% endblock %}

{% block page_header %}
<div class="container header-container">
    <div class="row">
        <div class="col text-center">
            <!-- âœ… Museart Logo -->
            <img src="{% static 'images/museart.jpg' %}" alt="Museart Logo" class="img-fluid my-0" style="max-height: 60%;">
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="overlay"></div>
<div class="container mt-5">
    <div class="row justify-content-center text-white">
        <div class="col-lg-10">

            <!-- ğŸ‰ Thank You Section -->
            <div class="text-center mb-10">
                <h2 class="logo-font">ğŸ‰ Thank You for Your Order!</h2>
                <p class="lead text-light">
                    A confirmation email has been sent to <strong>{{ order.email }}</strong>.
                </p>
                <hr class="border-light">
            </div>

            <!-- âœ… Order Summary Card -->
            <div class="card p-4 shadow-lg bg-dark text-light">
                <h3 class="text-center text-success mb-3">âœ… Order Placed Successfully</h3>
                <p class="text-center">Weâ€™re preparing your order and will ship it soon.</p>

                <h4 class="text-center mt-4">ğŸ§¾ Order Number: <strong>{{ order.order_number }}</strong></h4>

                <!-- ğŸ“ Shipping Info -->
                <div class="mt-4">
                    <h5>ğŸ“ Shipping Details:</h5>
                    <p><strong>Name:</strong> {{ order.full_name }}</p>
                    <p><strong>Email:</strong> {{ order.email }}</p>
                    <p><strong>Phone:</strong> {{ order.phone_number }}</p>
                    <p><strong>Address:</strong> 
                        {{ order.street_address1 }}
                        {% if order.street_address2 %}, {{ order.street_address2 }}{% endif %},
                        {{ order.town_or_city }}, {{ order.postcode }},
                        {{ order.country }}
                    </p>
                </div>

                <!-- ğŸ›ï¸ Ordered Items -->
                <div class="mt-4">
                    <h5>ğŸ›ï¸ Items:</h5>
                    <ul class="list-group list-group-flush bg-transparent">
                        {% for item in order.lineitems.all %}
                            <li class="list-group-item bg-transparent text-white border-bottom">
                                {{ item.product.name }} Ã— {{ item.quantity }} â€” ${{ item.lineitem_total|floatformat:2 }}
                            </li>
                        {% endfor %}
                    </ul>
                </div>

                <!-- ğŸ’³ Payment Summary -->
                <div class="mt-4">
                    <h5>ğŸ’³ Payment Summary:</h5>
                    <p><strong>Subtotal:</strong> ${{ order.order_total|floatformat:2 }}</p>
                    <p><strong>Delivery:</strong> ${{ order.delivery_cost|floatformat:2 }}</p>
                    <p class="h5"><strong>Total Paid:</strong> ${{ order.grand_total|floatformat:2 }}</p>
                </div>

                <!-- ğŸ“… Delivery ETA -->
                <div class="mt-3">
                    <p class="text-muted">
                        ğŸ“… <strong>Estimated Delivery:</strong> 
                        <span class="text-info">{{ order.date|date:"F d, Y" }}</span>
                    </p>
                </div>

                <!-- ğŸš€ Actions -->
                <div class="text-center mt-4">
                    <a href="{% url 'products' %}" class="btn btn-primary">ğŸ” Continue Shopping</a>
                    <button onclick="window.print()" class="btn btn-outline-light ml-2">ğŸ–¨ï¸ Print Order</button>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}
